<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>775N - Dados Gerais</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="shortcut icon" href="images/icon.png" type="image/x-icon">
</head>
<body>
    <!--Começando a barra lateral das KPIs-->
    <div id="sidebar">
        <div id="KPIHorarios">
            <span>Horários Vazios</span>
            <p>13:00</p>
            <span>Média em horários vazios</span>
            <p>4,5 passageiros por ponto</p>
        </div>
        <div id="KPIPontosRuins" class="KPIAlerta">
            <span>Horários Cheios</span>
            <p>19:00</p>
            <span>Média em horários cheios</span>
            <p class="alerta">7 passageiros por ponto</p>
        </div>
        <div id="KPIMovimentaçãoPontos">
            <span>Ponto mais movimentado</span>
            <p>7</p>
            <p>Av. Rebouças, 2549</p>
            <span>Ponto menos movimentado</span>
            <p>2</p>
            <p>R. Pe. Alarico, 1412</p>
        </div>
        <div id="KPIVeiculos" class="KPIAlerta">
            <span>Viagens Superlotadas</span>
            <p class="alerta">Básico 50%</p>
            <p>Padron 0%</p>
        </div>
    </div>
    <!--Terminada a barra lateral das KPIs-->
    <!--Início do conteúdo principal da dashboard-->
    <div id="conteudoDashboard">
        <!--Início do corpo da dashboard-->
        <div id="corpoDashboard">
            <!--Início do cabeçalho da dashboard, contendo o título da rota, suas infos. e classificação-->
            <div id="cabecalhoDashboard">
                <div id="tituloRota">
                    <h1>775N</h1>
                    <div id="infosRota">
                        <p><i>Rota Normal</i> (10)</p>
                        <p><u>Term. Vila Madalena</u></p>
                        <p>Rio Pequeno</p>
                    </div>
                </div>
                <div id="selecionarHorario">
                    <p>Selecionar um horário</p>
                    <div>
                        <select>
                            <option value="optN">Selecionar</option>
                            <option value="opt13">13:00</option>
                            <option value="opt19">19:00</option>
                        </select>
                        <a href="dashboardHora.html"><button>Ir</button></a>
                    </div>
                    <details>
                        <summary>?</summary>
                        Selecione um horário de saída para ver informações de dias específicos
                    </details>
                </div>
            </div>
            <!--Fim do cabeçalho da dashboard-->
            <!--Início da área do gráfico da dashboard-->
            <div id="graficoDashboard"><!--Esta div contém, além do gráfico, seu título e uma descrição de como visualizar-->
                <h2>Média geral dos horários da rota</h2><!--cada horário por si só.-->
                <p>
                    Clique em um dos horários para ver informações de cada dia em específico, 
                    dentro de um intervalo de tempo customizável.
                </p>
                <canvas id="graficoRota"></canvas>
            </div>
            <!--Fim da área do gráfico da dashboard-->
        </div>
        <!--Fim do corpo da dashboard-->
        <!--Início da barra lateral da classificação e dos veículos nessa rota-->
            <div id="sidebarOutrosDados">
                <div id="classificacao">
                    <canvas id="graficoClassific"></canvas>
                    <p>Classificação</p>
                    <details>
                        Nosso sistema tem três tipos de classificação para uma rota: ruim, boa e ideal; baseados no índice 
                        de aproveitamento dos recursos dispostos. Rotas vazias ou extremamente superlotadas geram uma 
                        classificação baixa.
                    </details>
                </div>
                <div id="veiculosDashboard">
                    <h3>Veículos</h3>
                    <div id="tabelaVeiculosDashboard">
                        <div id="tabelaVeiculosCabecalho" class="tabelaVeiculosLinha">
                           <p>Placa</p>
                            <p>Lotação</p>
                            <p>Modelo</p>
                        </div>
                        <div class="tabelaVeiculosLinha">
                            <p>CCV-4234</p>
                            <p>70</p>
                            <p>Básico</p>
                        </div>
                        <div class="tabelaVeiculosLinha">
                            <p>EEL-6867</p>
                            <p>70</p>
                            <p>Básico</p>
                        </div>
                        <div class="tabelaVeiculosLinha">
                            <p>EXR-4682</p>
                            <p>80</p>
                            <p>Padron</p>
                        </div>
                    </div>
                    <button id="btnAdicionarMaisVeiculos">Adicionar mais</button>
                </div>
                <div id="containerGraficoVeiculos">
                    <canvas id="graficoVeiculos"></canvas>
                </div>
                <a href="menuDashboard.html">< VOLTAR</a>
            </div>
            <!--Fim da barra lateral dos veículos nessa rota-->
    </div>
    <!--Fim do conteúdo principal da dashboard-->
</body>
</html>
<script>
    //Gráfico geral da rota
    const pontos = [
        "Av José Felipe, 580",
        "R. Pe. Alarico, 31",
        "Av. Eng. Heitor, 1421",
        "Av Corifeu, 1975",
        "Av. Dr. Vital Brasil, 569",
        "Av. Eusébio Matoso, 133",
        "Av Rebouças, 2549",
        "Av. Paulista, 2319",
        "Av. Brig. Luís Antônio, 1289",
        "Av. da Liberdade, 333"
    ]
    const cor1 = "#6CE5E8";
    const cor2 = "#FFDE59";
    const lotacaoOnibus = 80;
    const dadosGeral = {
        labels:pontos,
        datasets: [{
                label: "13:00 (CCV-4234)",
                backgroundColor: cor1,
                borderColor: cor1,
                data: [0,8,12,18.5,24.5,30.5,37,34,25,19]
            },
            {
                label: "19:00 (CCV-4234)",
                backgroundColor: cor2,
                borderColor: cor2,
                data: [15.3,30,37.5,45,53.5,64,61,32.5,25.5,10]
            }
        ]
    }
    const configGraficoGeral = {
        type: "line",
        data: dadosGeral,
        options: {
            scales: {
                y: {
                    max: lotacaoOnibus
            }
            }
        }
    }
    const graficoGeral = new Chart(
        document.getElementById("graficoRota"),
        configGraficoGeral
    );

    // Gráfico dos ônibus na rota
    // Todos os modelos:
    // const modelos = [
    //     "Miniônibus",
    //     "Midiônibus",
    //     "Básico",
    //     "Padron",
    //     "Articulado",
    //     "Biarticulado"
    // ]
     const modelos = [
         "Básico",
         "Padron",
    ]
    const dadosVeiculos = {
        labels:modelos,
        datasets: [{
                data: [2,1],
                backgroundColor: ['#69503C','#BD916E']
            }
        ]
    }
    const configGraficoVeiculos = {
        type: "pie",
        data: dadosVeiculos,
        options: {
            plugins: {
                legend: {
                    position: "bottom"
                }
            }
        }
    }
    const graficoVeiculos = new Chart(
        document.getElementById("graficoVeiculos"),
        configGraficoVeiculos
    );

    //Gráfico classificação
    const corClassific = '#DB0300';
    //document.getElementById("tituloRota").style = `backgroundColor: ${corClassific}`;
    //NAO CONSEGUI FAZER - GUS 27/04
    const classificacao = ["Otimização Atual","Melhora possível"]
    const dadosClassfic = {
        labels: classificacao,
        datasets: [{
                backgroundColor: [corClassific,"white"],
                borderColor: [corClassific],
                borderWidth: "0.5",
                data: [33,77],
                circumference: 180,
                rotation: 270
            }
        ]
    }
    const configGraficoClassific = {
        type: "doughnut",
        data: dadosClassfic,
        options: {
            aspectRatio: '1/4',
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    }
    const graficoClassific = new Chart(
        document.getElementById("graficoClassific"),
        configGraficoClassific
    );
</script>